{% load static %}
{% load payment_request_tags %}
<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <meta name="description" content="">
    <meta name="author" content="">
    <title>{% block title %} {% endblock title %} | Zrupee CMS</title>

    <!--<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous">-->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-WskhaSGFgHYWDcbwN70/dfYBj47jz9qbsMId/iRN3ewGhXQFZCSftd1LZCfmhktB" crossorigin="anonymous">
    <link href="https://cdn.jsdelivr.net/npm/pretty-checkbox@3.0/dist/pretty-checkbox.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">
    <!--<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp" crossorigin="anonymous">
    <script defer src="https://use.fontawesome.com/releases/v5.0.13/js/all.js" integrity="sha384-xymdQtn1n3lH2wcu0qhcdaOpQwyoarkgLVxC/wZ5q7h9gHtxICrpcaSUfygqZGOe" crossorigin="anonymous"></script>-->



    <!-- Bootstrap core CSS -->

    {% if user.is_authenticated %}
        <link href="{% static 'css/app/main.css' %}" rel="stylesheet">
        <link href="{% static 'css/app/for_navbar.css' %}" rel="stylesheet">
        <link href="{% static 'css/app/for_merchants.css' %}" rel="stylesheet">
        <link href="{% static 'css/app/for_commissions.css' %}" rel="stylesheet">

    {% else %}
        <link href="{% static 'css/app/login_form.css' %}" rel="stylesheet">
    {% endif %}

    <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>

    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.6-rc.0/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.6-rc.0/js/select2.min.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js" integrity="sha384-smHYKdLADwkXOn1EmN1qk/HfnUcbVRZyYmZ4qpPea6sjB/pTJ0euyQp0Mk8ck+5T" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/gijgo@1.9.6/js/gijgo.min.js" type="text/javascript"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.bundle.min.js" integrity="sha384-u/bQvRA/1bobcXlcEYpsEdFVK/vJs3+T+nXLsBYJthmdBuavHvAW6UsmqO2Gd/F9" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.9.0/slick.min.js"></script>

    <link href="https://cdn.jsdelivr.net/npm/gijgo@1.9.6/css/gijgo.min.css" rel="stylesheet" type="text/css" />

    <!--<link href="https://cdn.datatables.net/1.10.19/css/jquery.dataTables.min.css" rel="stylesheet" type="text/css" />-->
    <!--<script src="https://cdn.datatables.net/1.10.19/js/jquery.dataTables.min.js"></script>-->

    <!--<link href="https://cdn.datatables.net/responsive/2.2.3/css/responsive.bootstrap4.css" rel="stylesheet" type="text/css" />-->
    <!--<script src="https://cdn.datatables.net/responsive/2.2.3/css/responsive.bootstrap4.js"></script>-->

    <!--<script src="https://cdn.datatables.net/responsive/2.2.3/js/dataTables.responsive.js"></script>-->

    <!--<link href="https://cdn.datatables.net/responsive/2.2.3/css/responsive.dataTables.min.css" rel="stylesheet" type="text/css" />-->


    <!--<link href="https://cdn.datatables.net/1.10.19/css/dataTables.bootstrap4.min.css" rel="stylesheet" type="text/css" />-->
    <!--<script src="https://cdn.datatables.net/1.10.19/js/dataTables.bootstrap4.min.js"></script>-->

    <link href="https://cdn.datatables.net/v/dt/dt-1.10.16/r-2.2.1/datatables.min.css" rel="stylesheet" type="text/css" />
    <script src="https://cdn.datatables.net/v/dt/dt-1.10.16/r-2.2.1/datatables.min.js"></script>

    <script src="https://cdn.datatables.net/buttons/1.5.2/js/dataTables.buttons.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/1.5.2/js/buttons.flash.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.1.3/jszip.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.36/pdfmake.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.36/vfs_fonts.js"></script>
    <script src="https://cdn.datatables.net/buttons/1.5.2/js/buttons.html5.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/1.5.2/js/buttons.print.min.js"></script>

    <link href="https://cdn.datatables.net/buttons/1.5.2/css/buttons.dataTables.min.css" rel="stylesheet" type="text/css"/>


</head>

<body id="page-top">

{% if user.is_authenticated %}
    <!-- Navigation /starts -->
    <nav id="mainNav" class="navbar static-top navbar-expand-sm navbar-toggleable-md navbar-dark bg-dark" >
        <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse"
                data-target="#navbarExample" aria-controls="navbarExample"
                aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <a class="navbar-brand ml-2 header-logo" href="/"><img src="/static/images/logo.png" alt="Zrupee"></a>
        <ul class="navbar-nav ml-auto">
            {% if zr_user.role.name != "TERMINAL" %}
            <li class="nav-item"><a class="nav-link wheatTextColor headerTextName">{{ request.user.username.upper }} - {{ request.user.zr_admin_user.role.name }}
            </a>
            </li>
            {% else %}
            <li class="nav-item"><a class="nav-link wheatTextColor headerTextName">TERMINAL - {{ zr_user.first_name.upper }}</a>
            </li>
            {% endif %}
        </ul>


        <div class="collapse navbar-collapse" id="navbarExample">
            <ul class="navbar-nav ml-auto">
                {% if request.user.is_superuser or request.user.zr_admin_user.role.name == "ADMINSTAFF" or request.user.zr_admin_user.role.name == "DISTRIBUTOR" or request.user.zr_admin_user.role.name == "SUBDISTRIBUTOR" and zr_user.role.name != "TERMINAL"  or request.user.zr_admin_user.role.name == "OPERATIONS"%}
                <li class="nav-item leftMargin headerText {% if url_name == 'dashboard' %}active{% endif %}">
                        <a class="nav-link " href="{% url 'user:dashboard' %}">Dashboard</a>
                </li>
                {% endif %}

                {% if request.user.zr_admin_user.role.name == "DISTRIBUTOR" or request.user.zr_admin_user.role.name == "SUBDISTRIBUTOR"%}
                <li class="nav-item leftMargin headerText {% if url_name == 'merchant-create' %}active{% endif %}">
                    <a class="nav-link" href="{% url 'user:merchant-create' %}">Add Merchant</a>
                </li>
                {% endif %}

                {% if request.user.zr_admin_user.role.name == "RETAILER" and zr_user.role.name != "TERMINAL" %}
                <li class="nav-item leftMargin headerText {% if url_name == 'terminal-create' %}active{% endif %}">
                    <a class="nav-link" href="{% url 'user:terminal-create' %}">Add Terminal</a>
                </li>
                {% endif %}

                {% if request.user.zr_admin_user.role.name == "DISTRIBUTOR" %}
                <li class="nav-item leftMargin headerText {% if url_name == 'sub-distributor-create' %}active{% endif %}">
                    <a class="nav-link" href="{% url 'user:sub-distributor-create' %}">Add Sub-distributor</a>
                </li>
                {% endif %}

                {% if request.user.is_superuser or request.user.zr_admin_user.role.name == "ADMINSTAFF" or request.user.zr_admin_user.role.name == "OPERATIONS" %}
                <li class="nav-item leftMargin headerText {% if url_name == 'distributor-create' %}active{% endif %}">
                    <a class="nav-link" href="{% url 'user:distributor-create' %}">Add Distributor</a>
                </li>
                <!--
                <li class="nav-item leftMargin headerText {% if url_name == 'retailer-create' %}active{% endif %}">
                    <a class="nav-link" href="{% url 'user:retailer-create' %}">Add Retailer</a>
                </li> -->
                {% endif %}
                <li class="nav-item leftMargin headerText {% if url_name == 'merchant-create' %}active{% endif %}">
                    <a class="nav-link redTextColor" href="{% url 'logout' %}?next=/">Logout</a>
                </li>
            </ul>
            <hr class="white-line">
            <ul class="sidebar-nav navbar-nav mx-auto scrollbar scrollbar-black bordered-black">
                {% if request.user.is_superuser or request.user.zr_admin_user.role.name == "ADMINSTAFF" or request.user.zr_admin_user.role.name == "OPERATIONS"%}
                <li class="nav-item {% if url_name == 'distributor-list' %}active{% endif %}">
                     <a class="nav-link side-nav-pl" href="{% url 'user:distributor-list' %}">Distributors</a>
                 </li>
                {% endif %}

                {% if request.user.is_superuser or request.user.zr_admin_user.role.name == "ADMINSTAFF" or request.user.zr_admin_user.role.name == "DISTRIBUTOR"  or request.user.zr_admin_user.role.name == "OPERATIONS"%}
                 <li class="nav-item {% if url_name == 'sub-distributor-list' %}active{% endif %}">
                     <a class="nav-link side-nav-pl" href="{% url 'user:sub-distributor-list' %}">Sub-Distributors</a>
                 </li>
                {% endif %}

                {% if request.user.is_superuser or request.user.zr_admin_user.role.name == "ADMINSTAFF" or request.user.zr_admin_user.role.name == "DISTRIBUTOR" or request.user.zr_admin_user.role.name == "SUBDISTRIBUTOR" or request.user.zr_admin_user.role.name == "OPERATIONS"%}
                <li class="nav-item {% if url_name == 'merchant-list' %}active{% endif %}">
                     <a class="nav-link side-nav-pl" href="{% url 'user:merchant-list' %}">Merchants</a>
                </li>
                {% endif %}

                {% if request.user.zr_admin_user.role.name != "RETAILER" %}
                <li class="nav-item {% if url_name == 'transaction-list' %}active{% endif %}">
                    <a class="nav-link side-nav-pl" href="{% url 'transaction:transaction-list' %}">Transactions</a>
                </li>
                <li class="nav-item {% if url_name == 'payment-request-list' %}active{% endif %}" style="position:relative;">
                    <a class="nav-link side-nav-pl" href="{% url 'payment-requests:payment-request-list' %}">Payment Requests</a>
                    <span class="badge badge-pill badge-outline">{{ request|payment_req_cnt }}</span></a>
                </li>
                <li class="nav-item {% if url_name == 'payment-request-sent-view' %}active{% endif %}">
                    <a class="nav-link side-nav-pl" href="{% url 'payment-requests:payment-request-sent-view' %}">Payment request sent</a>
                </li>
                {% endif %}

                {% if request.user.is_superuser or request.user.zr_admin_user.role.name == "ADMINSTAFF" or request.user.zr_admin_user.role.name == "DISTRIBUTOR" or request.user.zr_admin_user.role.name == "SUBDISTRIBUTOR" or request.user.zr_admin_user.role.name == "OPERATIONS" %}
                <li class="nav-item {% if url_name == 'display-commission' %}active{% endif %}">
                    <a class="nav-link side-nav-pl" href="{% url 'commission:display-commission' %}">Commissions</a>
                </li>
                {% endif %}

                {% if request.user.is_superuser or request.user.zr_admin_user.role.name == "ADMINSTAFF" or request.user.zr_admin_user.role.name == "OPERATIONS"%}
                <li class="nav-item {% if url_name == 'payment-list' %}active{% endif %}">
                    <a class="nav-link side-nav-pl" href="{% url 'payment-requests:payment-list' %}">Payments</a>
                </li>
                {% endif %}

                {% if request.user.is_superuser or request.user.zr_admin_user.role.name == "ADMINSTAFF" or request.user.zr_admin_user.role.name == "DISTRIBUTOR" or request.user.zr_admin_user.role.name == "SUBDISTRIBUTOR"  or request.user.zr_admin_user.role.name == "OPERATIONS"%}
                <li class="nav-item {% if url_name == 'passbook-list' %}active{% endif %}">
                    <a class="nav-link side-nav-pl" href="{% url 'wallet:passbook-list' %}">Passbook</a>
                </li>
                <li class="nav-item {% if url_name == 'wallet-list' %}active{% endif %}">
                    <a class="nav-link side-nav-pl" href="{% url 'user:wallet-list' %}">Wallets</a>
                </li>
                {% endif %}

                {% if request.user.zr_admin_user.role.name == "CHECKER" or request.user.is_superuser or request.user.zr_admin_user.role.name == "ADMINSTAFF" and request.user.zr_admin_user.role.name != "OPERATIONS" %}
                <li class="nav-item {% if url_name == 'kyc-requests' %}active{% endif %}">
                    <a class="nav-link side-nav-pl" href="{% url 'user:kyc-requests' %}">KYC Requests</a>
                </li>
                {% endif %}

                {% if request.user.zr_admin_user.role.name == "DISTRIBUTOR" or request.user.zr_admin_user.role.name == "SUBDISTRIBUTOR" %}
                <li class="nav-item {% if url_name == 'kyc-requests' %}active{% endif %}">
                    <a class="nav-link side-nav-pl" href="{% url 'loan:preapproved' %}">Avail Loan</a>
                </li>
                {% endif %}

                {% if request.user.is_superuser or request.user.zr_admin_user.role.name == "ADMINSTAFF" or request.user.zr_admin_user.role.name == "OPERATIONS"%}
                <li class="nav-item {% if url_name == 'retailer-list' %}active{% endif %}">
                     <a class="nav-link side-nav-pl" href="{% url 'loan:repayment-view' %}">Loan Repayments</a>
                </li>
                {% endif %}

                <!--
                {% if request.user.zr_admin_user.role.name != "RETAILER" and zr_user.role.name != "TERMINAL" and request.user.zr_admin_user.role.name != "DISTRIBUTOR" and request.user.zr_admin_user.role.name != "SUBDISTRIBUTOR"%}
                <li class="nav-item">
                    <a class="nav-link side-nav-pl" style="font-size:20px; margin-right:0px;" href="#">Loyalty - </a>
                </li>
                {% endif %}

                {% if request.user.is_superuser or request.user.zr_admin_user.role.name == "ADMINSTAFF" or request.user.zr_admin_user.role.name == "OPERATIONS" %}
                <li class="nav-item {% if url_name == 'retailer-list' %}active{% endif %}">
                     <a class="nav-link side-nav-pl" href="{% url 'user:retailer-list' %}">Retailers</a>
                </li>
                {% endif %}

                {% if request.user.is_superuser or request.user.zr_admin_user.role.name == "ADMINSTAFF" or request.user.zr_admin_user.role.name == "RETAILER" and zr_user.role.name != "TERMINAL" or request.user.zr_admin_user.role.name == "OPERATIONS"%}
                <li class="nav-item {% if url_name == 'terminal-list' %}active{% endif %}">
                     <a class="nav-link side-nav-pl" href="{% url 'user:terminal-list' %}">Terminals</a>
                </li>
                {% endif %}
                -->
                {% if request.user.zr_admin_user.role.name == "RETAILER" and zr_user.role.name != "TERMINAL"%}
                <li class="nav-item {% if url_name == 'loyaltycard-list' %}active{% endif %}">
                     <a class="nav-link side-nav-pl" href="{% url 'user:loyaltycard-list' %}">Loyalty Cards</a>
                </li>
                {% endif %}
                {% if zr_user.role.name == "TERMINAL" %}
                <li class="nav-item {% if url_name == 'generate-otp' %}active{% endif %}">
                     <a class="nav-link side-nav-pl" href='{% url "user:generate-otp" pk=zr_user.id %}'>GenerateOTP</a>
                </li>
                <li class="nav-item {% if url_name == 'issue-mobile' %}active{% endif %}">
                    <a class="nav-link side-nav-pl" href='{% url "user:issue-mobile" pk=zr_user.id %}'>Issue to Mobile No</a>
                </li>
                <li class="nav-item {% if url_name == 'activate-card' %}active{% endif %}">
                    <a class="nav-link side-nav-pl" href='{% url "user:activate-card" pk=zr_user.id %}'>Activate</a>
                </li>
                <li class="nav-item {% if url_name == 'recharge-card' %}active{% endif %}">
                    <a class="nav-link side-nav-pl" href='{% url "user:recharge-card" pk=zr_user.id %}'>Recharge</a>
                </li>
                <li class="nav-item {% if url_name == 'pay' %}active{% endif %}">
                    <a class="nav-link side-nav-pl" href='{% url "user:pay" pk=zr_user.id %}'>Pay</a>
                </li>
                <li class="nav-item {% if url_name == 'deactivate-card' %}active{% endif %}">
                    <a class="nav-link side-nav-pl" href='{% url "user:deactivate-card" pk=zr_user.id %}'>Deactivate</a>
                </li>
                <li class="nav-item {% if url_name == 'payment-history' %}active{% endif %}">
                    <a class="nav-link side-nav-pl" href="{% url 'user:payment-history' pk=zr_user.id %}">Payment History</a>
                </li>
                <li class="nav-item {% if url_name == 'activatedcard-list' %}active{% endif %}">
                    <a class="nav-link side-nav-pl" href="{% url 'user:activatedcard-list' pk=zr_user.id %}">Activated Loyalty Cards</a>
                </li>
                <br><br><br><br><br><br>
                <li class="nav-item ">
                    <a class="nav-link side-nav-pl" href="{% url 'user:dashboard' %}">Back to Retailer</a>
                </li>
                {% endif %}
                <!--
                {% if request.user.is_superuser or request.user.zr_admin_user.role.name == "ADMINSTAFF" or request.user.zr_admin_user.role.name == "RETAILER" and zr_user.role.name != "TERMINAL" or request.user.zr_admin_user.role.name == "OPERATIONS" %}
                <li class="nav-item {% if url_name == 'offer-list' %}active{% endif %}">
                    <a class="nav-link side-nav-pl" href="{% url 'user:offer-list' %}">Offers</a>
                </li>
                {% if request.user.is_superuser or request.user.zr_admin_user.role.name == "ADMINSTAFF" or request.user.zr_admin_user.role.name == "OPERATIONS" %}
                <li class="nav-item {% if url_name == 'offer-create' %}active{% endif %}">
                    <a class="nav-link side-nav-pl" href="{% url 'user:offer-create' %}">Create Offers</a>
                </li>
                {% endif %}
                {% if request.user.is_superuser or request.user.zr_admin_user.role.name == "ADMINSTAFF" or request.user.zr_admin_user.role.name == "OPERATIONS"%}
                <li class="nav-item {% if url_name == 'card-create' %}active{% endif %}">
                    <a class="nav-link side-nav-pl" href="{% url 'user:card-create' %}">Add Cards</a>
                </li>
                {% endif %}
                <li class="nav-item {% if url_name == 'payment-history' %}active{% endif %}">
                    <a class="nav-link side-nav-pl" href="{% url 'user:payment-history' pk=0 %}">Payment History</a>
                </li>
                {% endif %} -->
            </ul>
        </div>
    </nav>
    <!-- Navigation /ends -->

<script type="text/javascript">
$(document).ready(function(){
    $("#{{request.resolver_match.url_name}}").addClass('active');
    $('[data-toggle="tooltip"]').tooltip();
});
</script>

{% else %}
    {% block logincontent %}

    {% endblock %}

{% endif %}

{% block content %}

{% endblock %}
{% block extrascripts %}

{% endblock extrascripts %}
</body>

</html>
